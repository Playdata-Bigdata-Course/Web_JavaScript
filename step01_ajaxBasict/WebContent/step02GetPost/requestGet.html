<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<h3>get방식 Ajax</h3>
	
	<a href="response.jsp?name=kim&age=20">1. 요청시 query string 없음 : 동기 방식</a> <br>
	<button onclick="ajaxReq()">2. 비동기 요청</button> <br>
	<div id="dataView"></div>
	
	<script type="text/javascript">
		let xhr; //var를 쓰면 
		function ajaxReq(){
			//요청 객체
			xhr = new XMLHttpRequest();
			//속성에 요청~응답 완료까지 감지하는 로직 구현
			
			xhr.onreadystatechange = resData;
			
			//get방식 요청시 query string 없이 요청
			//xhr.open("GET", "response.jsp", true);
			
			//get방식 요청시 query string 제공하면서 요청
			xhr.open("GET", "response.jsp?name=kim&age=20", true);
			
			xhr.send();
		}
		//응답 완료 + 정상응답 시 실행되는 로직으로만 구현
		function resData(){
			//응답 완료? 정상 응답? 검증
			if(xhr.readyState == 4 && xhr.status == 200){
				//정상 응답완료시 dataView 출력
				document.getElementById("dataView").innerText = xhr.responseText;
			}
		}
	</script>
	
</body>
</html>